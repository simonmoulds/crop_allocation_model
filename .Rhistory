source("code/allocate.R")
sourceCpp("code/allocate.cpp")
q()
n
library(Rcpp")
library(Rcpp)
library(RcppArmadillo)
sourceCpp("code/allocate.cpp")
mat = matrix(data=1:20, nrow=4)
mat
schur(mat, mat)
schur(mat, mat)
schur(mat, mat)
schur(mat, mat)
sourceCpp("code/allocate.cpp")
source("code/allocate.R")
sourceCpp("code/allocate.cpp")
sourceCpp("code/allocate.cpp")
sourceCpp("code/allocate.cpp")
sourceCpp("code/allocate.cpp")
sourceCpp("code/allocate.cpp")
source("code/allocate.R")
sourceCpp("code/allocate.cpp")
source("code/allocate.R")
runif(1,0,0)
runifC(1,0,1)
runifC(10,0,1)
runifC(10,0,2)
sourceCpp("code/allocate.cpp")
sourceCpp("code/allocate.cpp")
source("code/allocate.R")
sourceCpp("code/allocate.cpp")
source("code/allocate.R")
sourceCpp("code/allocate.cpp")
sourceCpp("code/allocate.cpp")
source("code/allocate.R")
sourceCpp("code/allocate.cpp")
sourceCpp("code/allocate.cpp")
sourceCpp("code/allocate.cpp")
source("code/allocate.R")
source("code/allocate.R")
plot(rice_irri_nb)
rice_harv[["irri"]]
area
cell_area
(rice_harv[["irri"]] / cell_area)
plot(rice_irri_nb)
f
fs
fs
fs
i=1
f
d
f
d
o(rice_harv[["irri"]] / cell_area)
f
r
source("code/process_gaez.R")
names(rice_harv)
level="hsuhi"
crop="whe"
dir
path = "data/gaez_data"
dir.exists(file.path(path, dir))
level
gsub("^([a-z]{1})([a-z]+)$", "\\1_\\2", level)
gsub("^([a-z]{1})([a-z]+)$", "\\1_\\2", level)
d
dir
f
f
f
r
out=list()
out[["a"]] = c(1,2,3)
out
get_gaez_suit_data("whe","data/gaez_data")
get_gaez_suit_data("rcd","data/gaez_data")
get_gaez_suit_data("rcw","data/gaez_data")
fs
f
f
plot(x)
x
summary(x)
summary(getValues(x))
source("code/process_spatial_data.R")
q()
n
source("code/rasterize_gcam_regions.R")
q()
n
source("code/process_spatial_data.R")
length(rice_suit_w)
length(rice_suit_d)
names(rice_suit)
rice_nb
rice_irri_nb
rice_nb[[1]]
rice_nb[[2]]
rice_nb[[3]]
rice_nb[[1]]
rice_nb[[2]]
rice_nb[[3]]
names(rice_nb)
rice_nb
names(rice_nb)
names(rice_suit)
names(rice_nb)
barl_suit
names(barl_suit)
soyb_nb
source("code/prepare_input_data.R")
rcof_nb
length(rcof_nb)
names(rcof_nb)
length(cell_ix)
res = myfun(barl=barl_harv, maiz=maiz_harv, pmil=pmil_harv, na_ix=cell_ix, season_nm="kharif")
res = myfun(barl=barl_harv, maiz=maiz_harv, pmil=pmil_harv, na_ix=cell_ix, season_nm="kharif")
objs=list(barl=barl_harv, maiz=maiz_harv, pmil=pmil_harv)
na_ix=cell_ix
season_nm="kharif"
levels
nlevels
dfs
objs=list(barl=barl_harv, maiz=maiz_harv, pmil=pmil_harv)
nlevels
i
i=1
objs
dfs[[1]]
lapply(objs, FUN=function(x) x[[i]])
lapply(objs, FUN=function(x) x[[level]])
lapply(objs, FUN=function(x) x[[level]]) %>% stack
x= lapply(objs, FUN=function(x) x[[level]]) %>% stack %>% as.data.frame(na.rm=TRUE)
head(x)
x= lapply(objs, FUN=function(x) x[[level]]) %>% stack %>% as.data.frame(na.rm=TRUE) %>% mutate(season=season_nm, input=level, cell=seq_len(ncell(objs[[1]][[1]]))) %>% `[`(na_ix,)
x= lapply(objs, FUN=function(x) x[[level]]) %>% stack %>% as.data.frame(na.rm=TRUE) %>% mutate(season=season_nm, input=level, cell=seq_len(ncell(objs[[1]][[1]])))
x= lapply(objs, FUN=function(x) x[[level]]) %>% stack %>% as.data.frame(na.rm=TRUE) %>% mutate(season=season_nm, input=level, cell=seq_len(ncell(objs[[1]][[1]])))
ncell(objs[[1]][[1]])))
ncell(objs[[1]][[1]])
x= lapply(objs, FUN=function(x) x[[level]]) %>% stack %>% as.data.frame(na.rm=TRUE) %>% mutate(season=season_nm, input=level)
seq_len(ncell(objs[[1]][[1]]))
x= lapply(objs, FUN=function(x) x[[level]]) %>% stack %>% as.data.frame(na.rm=TRUE) %>% mutate(season=season_nm, input=level)
x= lapply(objs, FUN=function(x) x[[level]]) %>% stack %>% as.data.frame(na.rm=TRUE) %>% mutate(season=season_nm, input=level, cell=seq_len(ncell(objs[[1]][[1]])))
x= lapply(objs, FUN=function(x) x[[level]]) %>% stack %>% as.data.frame(na.rm=FALSE) %>% mutate(season=season_nm, input=level, cell=seq_len(ncell(objs[[1]][[1]])))
dim(x)
head(dfs[[1]])
na_ix[1:6]
res = myfun(barl=barl_harv, maiz=maiz_harv, pmil=pmil_harv, na_ix=cell_ix, season_nm="kharif")
res = myfun(barl=barl_harv, maiz=maiz_harv, pmil=pmil_harv, na_ix=cell_ix, season_nm="kharif")
names(barl_harv)
names(maiz_harv)
res = myfun(barl=barl_harv, maiz=maiz_harv, pmil=pmil_harv, na_ix=cell_ix, season_nm="kharif")
length(res)
head(res[[1]])
head(res[[2]])
head(res[[3]])
head(res[[4]])
names(barl_harv)
names(rice_khar_phys)
barl_harv[["irri"]]
barl_phys[["irri"]]
rice_phys[["irri"]]
rice_harv[["irri"]]
sum(getValues(barl_harv[["irri"]]))
sum(getValues(barl_harv[["irri"]]), na.rm=T)
sum(getValues(barl_phys[["irri"]]), na.rm=T)
kharif_irri_area_df
kharif_irri_area_df1 = kharif_irri_area_df
all.equal(kharif_irri_area_df1,kharif_irri_area_df)
all.equal(res, kharif_irri_area_df)
dim(res)
class(res)
all.equal(res[[1]], kharif_irri_area_df)
head(res[[1]])
head(kharif_irri_area_df)
all.equal(res[[1]], kharif_irri_area_df)
all.equal(res[[1]], kharif_irri_area_df)
all.equal(rabi_area[[1]], rabi_irri_area_df)
all.equal(annual_area[[1]], annual_irri_area_df)
head(x)
dim(x)
dim(kharif_area[[1]])
161596 / 40399
head(x)
head(x)
names(df)
names(kharif_area)
head(kharif_area)
dim(kharif_area)
head(area_df)
area_df[which(!is.na(area_df$rice))[1:20],c("cell","season","input"<"rice")]
area_df[which(!is.na(area_df$rice))[1:20],c("cell","season","input","rice")]
area_df[which(!is.na(area_df$rice) & area_df$rice > 0)[1:20],c("cell","season","input","rice")]
dim(yield_df)
dim(area_df)
rice_nb
names(rice_nb)
dim(kharif_nb_df)
dim(kharif_area_df)
names(kharif_suit)
names(rice_suit)
length(rice_suit)
rice_suit[[1]]
rice_nb[[1]]
q()
n
source("code/prepare_input_data.R")
cell_ix
rcof_suit
names(rice_suit)
res=myfun(rice=rice_suit, levels=c("hsuhi","hsuhr","lsulr","lsulr"), season_nm="kharif",df=FALSE)
res=myfun(rice=rice_suit, levels=c("hsuhi","hsuhr","lsulr","lsulr"), na_ix=cell_ix, season_nm="kharif",df=FALSE)
dim(res)
dim(res[[1]])
head(res[[1]])
length(rice_suit)
res=myfun(rice=rice_suit, levels=c("hsuhi","hsuhr","lsulr","lsulr"), na_ix=cell_ix, season_nm="kharif",df=TRUE)
dim(res)
121197/4
121197/3
names(rice_suit)
rice_suit
length(rice_suit)
names(rice_suit)
names(rice_suit)
rice_suit
names(rice_suit)
all.equal(rice_suit[[3]], rice_suit[[4]])
q()
n
source("code/prepare_input_data.R")
sugc_suit
sugb_suit
cnut_suit
oilp_suit
trof_suit
temf_suit
bana_suit
plnt_suit
coco_suit
teas_suit
acof_suit
rcof_suit
cass_suit
yams_suit
orts_suit
annual_suit_df = myfun(sugc=sugc_suit, sugb=sugb_suit, cnut=cnut_suit,
                       oilp=oilp_suit, trof=trof_suit, temf=temf_suit,
                       bana=bana_suit, plnt=plnt_suit, coco=coco_suit,
                       teas=teas_suit, acof=acof_suit, rcof=rcof_suit,
                       cass=cass_suit, yams=yams_suit, orts=orts_suit,
                       na_ix=cell_ix, season_nm="annual")
names(cass_suit)
cass_suit
names(rice_khar_nb)
names(rice_khar_phys)
names(rice_suit)
names(rice_suit)
names(yams_suit)
q()
n
source("code/prepare_input_data.R")
rice_suit
rice_suit_d
rice_suit
length(rice_suit)
names(rice_suit_w)
names(rice_suit_d)
rice_suit[c(1,1,3,3,4,4)]
length(rice_suit[c(1,1,3,3,4,4)])
names(barl_suit)
q()
n
source("code/prepare_input_data.R")
dim(rabi_area_df)
242394/6
head(area_df)
names(rice_suit)
names(suit_df)
summary(suit_df$rice)
summary(suit_df$rice)
summary(suit_df$rice)
summary(suit_df$rice)
q()
n
