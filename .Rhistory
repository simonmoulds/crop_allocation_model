summary(bana_yield[bana_yield > 0])
length(bana_yield[bana_yield > 0])
colnames(init_yield_mat)[37]
source("code/allocate.R")
which(colnames(init_yield_mat) %in% "trof")
source("code/allocate.R")
source("code/allocate.R")
source("code/allocate.R")
nms
i=39
j
j=1
yield
length(yield)
yield
any(yield > 0)
length(which(yield > 0))
suit
any(ix)
mod
plot(suit, yield)
lines(pred)
length(pred)
lines(seq(0,1,length.out=2336), pred)
lines(seq(0,1,by=0.01), predict(mod, newdata=data.frame(y=seq(0,1,by=0.01))))
any(ix)
length(which(ix))
plot(suit[ix], yield[ix])
lines(seq(0,1,by=0.01), predict(mod, newdata=data.frame(y=seq(0,1,by=0.01))))
source("code/allocate.R")
i
i=1
col_ix
j
j=1
length(yield)
yield
min(yield[yield > 0])
max(yield[yield > 0])
mean(yield[yield > 0])
length(row_ix)
length(rep(yield0, each=n_season))
col_ix
j
source("code/allocate.R")
source("code/allocate.R")
mean(c(0,0,0,0))
head(gcam_yield)
head(gcam_prod)
head(gcam_yield)
dim(gcam_yield)
head(gcam_yield)
dim(gcam_yield)
head(gcam_yield)
head(gcam_yield)
gcam_yield$Units
gcam_yield
head(gcam_yield)
head(gcam_prod)
head(gcam_yield)
head(gcam_yield)
head(gcam_yield)
head(gcam_yield)
unique(gcam_yield$sector)
head(gcam_yield)
max(init_yield_mat)
max(init_yield_mat, na.rm=TRUE)
which(colnames(init_yield_mat) %in% "sugc")
max(init_yield_mat[,33])
max(init_yield_mat[,1])
max(init_yield_mat[,1], na.rm=TRUE)
max(init_yield_mat[,2], na.rm=TRUE)
max(init_yield_mat[,3], na.rm=TRUE)
max(init_yield_mat[,4], na.rm=TRUE)
max(init_yield_mat[,5], na.rm=TRUE)
apply(init_yield_mat, 2, max, na.rm=TRUE)
q()
n
source("code/prepare_input_data.R")
rice_yield
plot(rice_yield[[1]])
plot(bana_yield[[1]])
plot(stackApply(stack(bana_yield), indices=c(1,1,1,1,1,1), fun=sum))
plot(stackApply(stack(plnt_yield), indices=c(1,1,1,1,1,1), fun=sum))
plot(stackApply(stack(bana_suit), indices=c(1,1,1,1,1,1), fun=sum))
india_ext
rice_suit
mktinf
mktacc
mktinf
plot(mkt_inf)
plot(mktinf)
mktacc
popdens
plot(cells)
ix
names(rice_yield)
cell_ix
length(cell_ix)
length(ix)
length(which(rice_ix))
rice_yield[[2]]
mktinf
mktacc
popdens
stack(mktinf, mktacc, popdens)
stack(mktinf, mktacc)
popdens
?raster::aggregate
popdens
dim(x)
length(rice_ix)
dim(x)
head(x)
names(x)
mod
summary(mod)
length(obs)
length(pred)
length(pred)
rsq
obs
pred
length(which(is.na(obs)))
rsq
dim(x)
dim(x)
ncell(rice_yield[[2]])
x$yield
vals
plot(rice_suit[[1]])
vals[rice_ix]
complete.cases(x)
dim(x)
dim(x)
rsq
plot(rice_yield[[2]])
plot(trof_yield[[1]])
plot(stack(trof_yield))
plot(bana_yield[[1]])
plot(bana_suit[[1]])
plot(bana_yield[[1]])
plot(cnut_yield[[1]])
plot(cnut_suit[[1]])
plot(cass_yield[[1]])
plot(trof_suit[[1]])
plot(trof_yield[[1]])
plot(ofib_yield[[1]])
plot(ofib_suit[[1]])
plot(ofib_yield[[1]])
names(ofib_suit)
plot(ofib_yield[[2]])
plot(stack(ofib_yield))
india_ext
i
i=1
q()
n
i=1
col_ix
nms[i]
j
j=1
row_ix
head(yield)
yield0
plot(yield)
plot(yield[yield > 0])
colnames(init_suit_mat)[39]
suit
plot(suit[ix], yield[ix])
plot(suit[ix], yield[ix])
rice_yield
rice_suit
names(rice_yield)
names(rice_suit)
x=rice_yield[[2]]
y=rice_suit[[2]]
dim(spdf)
head(spdf)
x
y
plot(x)
v = getValues(x)
summary(v)
any(xv == 0 & yv > 0)
length(which(xv == 0 & yv > 0))
ix = (which(xv == 0 & yv > 0))
points(spdf[ix])
points(spdf[ix,])
 dim(spdf)
ncell(x)
library(gstat)
install.packages("gstat")
library(gstat)
?raster::interpolate
gs
x
x
dim(x)
ncell(x)
summary(x)
length(spdf)
dim(spdf)
names(spdf)
idw
plot(idw)
plot(idw)
plot(idw)
?gstat
x=rice_yield[[2]]
y=rice_suit[[2]]
x
plot(idw)
rice_yield[["total"]]
rice_yield[["irri"]]
stackApply(stack(rice_yield[c("irri","rain_h","rain_l","rain_s")]), indices=c(1,1,1,1), fun=mean)
stackApply(stack(rice_yield[c("irri","rain_h","rain_l","rain_s")]), indices=c(1,1,1,1), fun=mean)
stackApply(stack(rice_yield[c("irri","rain_h","rain_l","rain_s")]), indices=c(1,1,1,1), fun=sum)
stackApply(stack(rice_yield[c("irri","rain_h","rain_l","rain_s")]), indices=c(1,1,1,1), fun=mean)
interpolate_yield(rice_yield, rice_suit)
cellStats(x)
cellStats(x, stat=max)
cellStats(x, stat=max)
x
summary(x)
cellStats(x, stat=max)
?cellStats
plot(trof_yield[[1]])
plot(trof_yield[[2]])
plot(trof_yield[[2]])
plot(trof_yield[[2]])
source("code/prepare_input_data.R")
q()
n
source
source("code/prepare_input_data.R")
source("code/prepare_input_data.R")
source("code/allocate.R")
plot(ooil_suit[[1]])
plot(ooil_suit[[2]])
plot(ooil_yield[[2]])
plot(ooil_yield[[2]])
plot(ooil_nb[[1]])
plot(ooil_yield[[2]])
plot(soyb_suit[[2]])
plot(sunf_suit[[2]])
plot(grou_suit[[2]])
plot(ooil_nb[[2]])
ooil_suit
india_rgn
ooil_suit
plot(ooil_suit)
plot(cnut_yield[[2]])
plot(cnut_yield[[1]])
plot(cnut_suit[[1]])
plot(cnut_suit[[2]])
plot(cnut_suit[[3]])
plot(cnut_nb[[1]])
q()
n
source("code/prepare_input_data.R")
source("code/allocate.R")
which(colSums(dmd) == 0)
colSums(dmd)
colnames(suit_mat)
colnames(suit_mat) %in% "ooil"
which(colnames(suit_mat) %in% "ooil")
suit_mat[,17]
tsuit_mat[,17]
tsuit_mat[,17])
max(suit_mat)
x=cnut_phys
i=1
xx
plot(xx)
ca
plot(xx)
plot(nb)
plot(nb)
plot(ooil_yield[[2]])
plot(stack(ooil_nb))
q()
n
source("code/prepare_input_data.R")
source("code/allocate.R")
plot(stack(ooil_yield))
source("code/prepare_input_data.R")
misc_bean_frac + misc_chic_frac + misc_cowp_frac + misc_opul_frac + misc_pmil
misc_bean_frac + misc_chic_frac + misc_cowp_frac + misc_opul_frac + misc_pmil_frac + misc_pige_frac + misc_lent_frac
misc_bean_frac + misc_chic_frac + misc_cowp_frac + misc_opul_frac + misc_pige_frac + misc_lent_frac
ls()
grep("^misc", ls(), values=TRUE)
grep("^misc", ls(), value=TRUE)
misc_trof_frac
misc_vege_frac
misc_toba_frac
misc_opul_frac
source("code/allocate.R")
source("code/allocate.R")
source("code/allocate.R")
plot(stack(cnut_suit))
palm_sf
palm_cnut_frac
names(gcam_prod)
gcam_prod$PalmFruit
gcam_prod$Units
dmd
names(dmd)
colnames(dmd)
dmd$cnut
dmd[["cnut"]]
dmd[,"cnut"]
x = dmd[,"cnut"]
x[2] - x[1]
x = dmd[,"ooil"]
x[2] - x[1]
cnut_yield
source("code/allocate.R")
init_yield_mat[,"cnut"]
y=init_yield_mat[,"cnut"]
summary(y)
y=init_yield_mat[,"whea"]
summary(y)
plot(cnut_yield[["total"]]
)
summary(cnut_yield[["total"]]
)
setValues(raster(india_rgn), 0)
dummy
dummy
plot(cnut_yield[[2]])
pl
plot(cnut_yield[[2]])
plot(cnut_yield[[2]])
plot(cnut_yield[[4]])
plot(stack(cnut_yield))
source("code/prepare_input_data.R")
source("code/prepare_input_data.R")
source("code/allocate.R")
i
dmd0
dmd1
dmd1[,"cnut"]
dmd1[,"cnut"]
dmd1["cnut"]
dmd0["cnut"]
dmd[,"cnut"][1:5]
i
dmd09
dmd0
dmd1
dmd0
length(dmd0)
dmd1
length(dmd1)
dmd1["cnut"]
i
dmd1
dmd1["cnut"]
j
crop
crop_ix
colnames(dmd)[crop_ix]
dmd1
dmd1[crop_ix]
area_mat
dim(area_mat)
dim(yield_mat)
dim(suit_mat)
total_area_mat
total_area_mat[,crop_ix]
yield_mat[,crop_ix] * area_mat[,crop_ix]
sum(yield_mat[,crop_ix] * area_mat[,crop_ix])
dmd1["cnut"]
dmd1["cnut"]
dmd0["cnut"]
dmd1["cnut"]
dmd
dmd0["cnut"]
dmd1["cnut"]
source("code/allocate.R")
dmd1["cnut"]
crop
crop %in% decr_crops
length(time)
source("code/allocate.R")
i
i=2
dmd1["cnut"]
dmd0["cnut"]
dmd[,"cnut"][1:2]
source("code/allocate.R")
dmd[,"cnut"][1:2]
dmd1["cnut"]
source("code/allocate.R")
dmd1["cnut"]
source("code/allocate.R")
dmd1["cnut"]
dmd1["cnut"]
2138663 /2
decr_ix
length(decr_ix)
plot(stack(cnut_harv))
source("code/prepare_input_data.R")
source("code/allocate.R")
source("code/allocate.R")
plot(cnut_yield[["irri"]])
plot(cnut_yield[["rain"]])
plot(stack(cnut_yield[c("rain","rain")]))
plot(stack(cnut_yield[c("rain","rain")]))
plot(stack(cnut_yield[c("irri","rain")]))
source("code/prepare_input_data.R")
source("code/allocate.R")
plot(cnut_yield[["irri"]])
v = getValues(cnut_yield[["irri"]])
v1 = getValues(cnut_yield[["rain"]])
v2 = v1 / v
v2[v2 > 0 & !is.na(v2)]
v2[v2 > 0 & !is.na(v2) & !is.inf(v2)]
v2[v2 > 0 & !is.na(v2) & v2 == Inf]
v2[v2 > 0 & !is.na(v2) & v2 != Inf]
summary(v2[v2 > 0 & !is.na(v2) & v2 != Inf])
cnut_suit
names(cnut_suit)
names(cnut_suit)
source("code/helpers.R")
source("code/prepare_input_data.R")
source("code/allocate.R")
source("code/allocate.R")
plot(stack(ooil_suit))
plot(stack(ooil_yield))
plot(stack(ooil_harv))
source("code/prepare_input_data.R")
source("code/allocate.R")
plot(stack(ooil_yield))
plot(stack(ooil_harv))
plot(stack(ooil_yield))
dmd0
dmd0[,"ooil"]
dmd0["ooil"]
dmd1["ooil"]
plot(ooil_yield[["irri"]])
plot(ooil_yield[["irri"]] > ooil_yield[["rain"]])
plot(ooil_harv[["rain"]])
plot(ooil_yield[["irri"]] > ooil_yield[["rain"]])
source("code/allocate.R")
source("code/prepare_input_data.R")
source("code/allocate.R")
source("code/allocate.R")
source("code/allocate.R")
source("code/allocate.R")
names(gcam_prod)
gcam_prod$production
names(gcam_prod)
unique(gcam_prod$output)
head(gcam_bio)
unique(gcam_bio$fuel)
unique(gcam_bio$Units)
gcam_prod$biomass
names(gcam_prod)
head(gcam_prod)
dim(gcam_prod)
gcam_prod %>% filter(output %in% "biomass")
gcam_prod %>% filter(output %in% "Corn")
head(gcam_prod)
gcam_prod %>% filter(output %in% "biomass") %>% filter(region %in% "India")
gcam_prod %>% filter(output %in% "biomass") %>% filter(region %in% "India")
gcam_prod %>% filter(output %in% "biomass") %>% filter(region %in% "India")
xx=gcam_prod %>% filter(output %in% "biomass") %>% filter(region %in% "India")
sum(xx$X2100[1:12])
xx=gcam_prod %>% filter(output %in% "biomass") %>% filter(region %in% "India")
xx
names(gcam_land)
unique(gcam_land[["land.allocation"]])
gcam_land %>% filter(grepl("Jatropha", .[["land.allocation"]]))
gcam_land %>% filter(grepl("Miscanthus", .[["land.allocation"]]))
unique(gcam_land[["land.allocation"]])
sum(xx$X2100[1:12])
gcam_land %>% filter(grepl("miscanthus", .[["land.allocation"]]))
gcam_land %>% filter(grepl("willow", .[["land.allocation"]]))
gcam_land %>% filter(grepl("miscanthus", .[["land.allocation"]]))
gcam_land %>% filter(region %in% "India") %>% filter(grepl("miscanthus", .[["land.allocation"]]))
gcam_land %>% filter(region %in% "India") %>% filter(grepl("willow", .[["land.allocation"]]))
gcam_land %>% filter(region %in% "India") %>% filter(grepl("jatropha", .[["land.allocation"]]))
gcam_land %>% filter(region %in% "India") %>% filter(grepl("biomass", .[["land.allocation"]]))
24000 / 100
names(gcam_yield)
unique(gcam_yield$sector)
unique(gcam_yield$subsector)
gcam_yield %>% filter(sector %in% "biomassOil") %>% filter(region %in% "India")
gcam_yield %>% filter(sector %in% "biomassOil") %>% filter(region %in% "India")
unique(gcam_yield$Units)
gcam_yield %>% filter(sector %in% "biomass") %>% filter(region %in% "India")
gcam_yield %>% filter(sector %in% "NonFoodDemand_Forest") %>% filter(region %in% "India")
gcam_yield %>% filter(sector %in% "NonFoodDemand_Forest") ##%>% filter(region %in% "India")
unique(gcam_yield$sector)
gcam_yield %>% filter(sector %in% "OilCrop") %>% filter(region %in% "India")
q()
n
